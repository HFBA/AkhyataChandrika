# AI_Generated - Dhatu ID Management Solutions

This folder contains AI-generated scripts, tests, and documentation for handling two types of dhatu_id issues in the AkhyataChandrika project:

1. **Multiple Dhatu IDs**: Verbs that have more than one dhatu_id (330 cases)
2. **Not Found Dhatu IDs**: Verbs that have no dhatu_id assigned (595 cases)

## 📁 Folder Structure

```
AI_Generated/
├── scripts/
│   ├── collectors/          # Scripts to identify problematic entries
│   │   ├── collectMultipleDhatuIds.py
│   │   ├── collectNotFoundDhatuIds.py
│   │   └── README.md
│   ├── backport/            # Scripts to apply changes back to Data/
│   │   ├── backportMultipleDhatuIds.py
│   │   ├── backportNotFoundDhatuIds.py
│   │   └── README.md
│   ├── proofreading/        # Scripts for distributed proofreading workflow
│   │   ├── splitYamlForProofreading.py
│   │   ├── addReviewFields.py
│   │   ├── removeResolvedEntries.py
│   │   └── README.md
│   └── verification/        # Scripts to verify data integrity
│       ├── verifySplitIntegrity.py
│       ├── verifyResolvedDeletionAndBackport.py
│       ├── addEntryCountsToHeaders.py
│       └── README.md
├── tests/                   # Automated test suites
│   ├── testBackportIntegrity.py
│   ├── testCompleteBackportWorkflow.py
│   ├── testReviewWorkflow.py
│   └── README.md
├── output/                  # Generated YAML files (for manual editing)
│   ├── multiple_dhatu_ids_without_gati.yaml
│   ├── multiple_dhatu_ids_with_gati.yaml
│   ├── not_found_dhatu_ids_without_gati.yaml
│   └── not_found_dhatu_ids_with_gati.yaml
└── docs/                    # Complete documentation
    ├── AI_Doc.md
    ├── README_MultipleDhatuIds.md
    ├── README_NotFoundDhatuIds.md
    ├── QUICKSTART.md
    ├── QUICKSTART_NotFound.md
    ├── SUMMARY.md
    └── TEST_RESULTS.md
```

## 🚀 Quick Start

### Workflow A: Multiple Dhatu IDs (330 cases)

For verbs that have more than one dhatu_id.

#### Step 1: Collect Verbs with Multiple Dhatu IDs

From the **project root** directory:

```bash
python3 Scripts/AI_Generated/scripts/collectors/collectMultipleDhatuIds.py \
    Scripts/output/AkhyataChandrika_Autogenerated.json \
    Scripts/AI_Generated/output
```

This creates two files in `Scripts/AI_Generated/output/`:
- `multiple_dhatu_ids_without_gati.yaml` (159 entries)
- `multiple_dhatu_ids_with_gati.yaml` (126 entries)

#### Step 2: Manually Edit the YAML Files

Open both YAML files and correct the `dhatu_ids` field:

**Before:**
```yaml
"फलति":
  "dhatu_ids": "01.0594, 01.0608"    # Multiple IDs
```

**After:**
```yaml
"फलति":
  "dhatu_ids": "01.0594"              # Single correct ID
```

#### Step 3: Backport Changes to Original YAML Files

```bash
python3 Scripts/AI_Generated/scripts/backport/backportMultipleDhatuIds.py \
    Scripts/AI_Generated/output \
    Data
```

This automatically processes both files and updates the original YAML files in the `Data/` folder.

---

### Workflow B: Not Found Dhatu IDs (595 cases)

For verbs where dhatu_id is "Not Found" and needs to be assigned.

#### Step 1: Collect Verbs with "Not Found" Dhatu IDs

```bash
python3 Scripts/AI_Generated/scripts/collectors/collectNotFoundDhatuIds.py \
    Scripts/output/AkhyataChandrika_Autogenerated.json \
    Scripts/AI_Generated/output
```

This creates:
- `not_found_dhatu_ids_without_gati.yaml` (595 entries)
- `not_found_dhatu_ids_with_gati.yaml` (0 entries)

#### Step 2: Manually Assign Dhatu IDs

Open `not_found_dhatu_ids_without_gati.yaml` and replace "Not Found" with actual dhatu_ids:

**Before:**
```yaml
"सिद्ध्यति":
  "dhatu_id": "Not Found"    # Needs assignment
```

**After:**
```yaml
"सिद्ध्यति":
  "dhatu_id": "04.0087"       # Assigned correct ID
```

**Tip**: Edit 10-20 entries at a time, then backport incrementally.

#### Step 3: Backport Assignments to Original YAML Files

```bash
python3 Scripts/AI_Generated/scripts/backport/backportNotFoundDhatuIds.py \
    Scripts/AI_Generated/output \
    Data
```

The script will:
- Update entries where you assigned dhatu_ids
- Skip entries still marked as "Not Found"
- Report statistics

---

### Workflow C: Distributed Proofreading

For large-scale corrections involving multiple proofreaders.

#### Step 1: Split Large Files

```bash
python3 Scripts/AI_Generated/scripts/proofreading/splitYamlForProofreading.py
```

Splits YAML files into 10 manageable parts.

#### Step 2: Add Review Fields

```bash
python3 Scripts/AI_Generated/scripts/proofreading/addReviewFields.py
```

Adds `resolved` and `comment` fields to track proofreading progress.

#### Step 3: Distribute and Proofread

Distribute `part_*.yaml` files to proofreaders. They mark entries as `resolved: true` when corrected.

#### Step 4: Remove Resolved Entries

```bash
python3 Scripts/AI_Generated/scripts/proofreading/removeResolvedEntries.py
```

Removes completed entries, leaving only unresolved ones.

## 📂 Script Categories

### 🔍 Collectors (`scripts/collectors/`)
Scripts that scan the JSON file and identify problematic entries, creating YAML files for manual correction.

[→ Read more](scripts/collectors/README.md)

### ↩️ Backport (`scripts/backport/`)
Scripts that apply manually corrected YAML changes back to the original Data/ folder YAML files.

[→ Read more](scripts/backport/README.md)

### ✏️ Proofreading (`scripts/proofreading/`)
Scripts that support distributed proofreading by splitting files and managing review fields.

[→ Read more](scripts/proofreading/README.md)

### ✅ Verification (`scripts/verification/`)
Scripts that verify data integrity and validate workflow operations.

[→ Read more](scripts/verification/README.md)

### 🧪 Tests (`tests/`)
Automated test suites that ensure all workflows function correctly.

[→ Read more](tests/README.md)

## 📚 Documentation

### Multiple Dhatu IDs Workflow
- **[QUICKSTART.md](docs/QUICKSTART.md)** - Quick reference for multiple IDs
- **[README_MultipleDhatuIds.md](docs/README_MultipleDhatuIds.md)** - Complete workflow guide
- **[TEST_RESULTS.md](docs/TEST_RESULTS.md)** - Test verification (✅ ALL TESTS PASSED)

### Not Found Dhatu IDs Workflow
- **[QUICKSTART_NotFound.md](docs/QUICKSTART_NotFound.md)** - Quick reference for "Not Found"
- **[README_NotFoundDhatuIds.md](docs/README_NotFoundDhatuIds.md)** - Complete workflow guide

### General
- **[SUMMARY.md](docs/SUMMARY.md)** - Technical overview and benefits
- **[AI_Doc.md](docs/AI_Doc.md)** - Original requirements and implementation notes

## 🧪 Testing

Run the comprehensive test suite:

```bash
python3 Scripts/AI_Generated/tests/test_backport_functionality.py
```

**Status**: ✅ ALL TESTS PASSED (100% success rate)

## 📊 Statistics

### Multiple Dhatu IDs
- **Total verbs found**: 330 occurrences with multiple dhatu_ids
  - Without gati: 159 cases (simpler to review)
  - With gati: 126 cases (need careful attention)

### Not Found Dhatu IDs
- **Total verbs found**: 607 occurrences with "Not Found" dhatu_id
  - Unique verbs: 595
  - Without gati: 595 cases
  - With gati: 0 cases

### General
- **Files excluded**: `Data/3_नानार्थवर्गः` (as requested)
- **Test success rate**: 100% (for multiple IDs workflow)

## ✨ Key Features

1. **Organized Structure** - Scripts grouped by functionality for easy navigation
2. **Two Separate Files** - Without/with gati separation for easier management
3. **Smart Backport** - Can process single file or entire directory
4. **Distributed Proofreading** - Split large tasks among multiple reviewers
5. **Fully Tested** - 100% test coverage with automated verification
6. **Safe Operations** - Preserves YAML structure and formatting
7. **Comprehensive Docs** - README in each folder + detailed guides

## ⚠️ Important Notes

- Always run scripts from the **project root** directory
- The `नानार्थवर्गः` folder is automatically excluded from all operations
- Backport functionality has been thoroughly tested and verified
- Original YAML structure and formatting are preserved

## 🔄 Complete Workflow

1. **Generate JSON** (if not already done)
2. **Collect** verbs with multiple dhatu_ids → Creates 2 YAML files
3. **Edit** YAML files manually → Choose correct dhatu_id for each verb
4. **Backport** changes → Updates original YAML files in Data/
5. **Regenerate JSON** → Verify no "(More than one)" entries remain

## 💡 Tips

- Start with smaller files (with_gati versions have fewer entries)
- Process files incrementally to avoid overwhelming changes
- Use the test scripts to verify functionality before manual editing
- Consider distributed proofreading for large correction batches
- Run verification scripts after major operations
- Use version control (git) to track changes

## 🆘 Help

Each subfolder has its own README with detailed information:
- [Collectors README](scripts/collectors/README.md)
- [Backport README](scripts/backport/README.md)
- [Proofreading README](scripts/proofreading/README.md)
- [Verification README](scripts/verification/README.md)
- [Tests README](tests/README.md)

For overall workflow guidance:
1. [QUICKSTART.md](docs/QUICKSTART.md) for immediate reference
2. [README_MultipleDhatuIds.md](docs/README_MultipleDhatuIds.md) for detailed instructions
3. [TEST_RESULTS.md](docs/TEST_RESULTS.md) for verification results

---

**Created**: 2025-10-17
**Status**: ✅ Production Ready
**Test Status**: ✅ ALL TESTS PASSED
**Organization**: ✅ Reorganized for clarity and maintainability
